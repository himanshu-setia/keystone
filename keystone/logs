py27 develop-inst-noop: /opt/stack/keystone
py27 installed: -f file:///opt/stack/.wheelhouse,aioeventlet==0.4,alembic==0.8.0,amqp==1.4.8,anyjson==0.3.3,Babel==2.2.0,bashate==0.3.2,beautifulsoup4==4.4.1,cffi==1.4.2,coverage==4.0.3,cryptography==1.1.2,decorator==4.0.6,discover==0.4.0,docutils==0.12,dogpile.cache==0.5.7,dogpile.core==0.4.1,enum34==1.1.2,eventlet==0.17.4,extras==0.0.3,fixtures==1.2.0,flake8==2.2.4,functools32==3.2.3.post2,futures==3.0.3,greenlet==0.4.9,hacking==0.10.2,httplib2==0.9.2,idna==2.0,ipaddress==1.0.16,iso8601==0.1.11,Jinja2==2.8,jsonschema==2.5.1,keystonemiddleware==1.5.3,kombu==3.0.32,ldappool==1.0,linecache2==1.0.0,lxml==3.5.0,Mako==1.0.3,MarkupSafe==0.23,mccabe==0.2.1,mock==1.0.1,mox3==0.7.0,msgpack-python==0.4.6,netaddr==0.7.18,netifaces==0.10.4,oauthlib==1.0.3,oslo.concurrency==1.8.2,oslo.config==1.9.3,oslo.context==0.2.0,oslo.db==1.7.3,oslo.i18n==1.5.0,oslo.log==1.0.0,oslo.messaging==1.8.3,oslo.middleware==1.0.0,oslo.policy==0.3.2,oslo.serialization==1.4.0,oslo.utils==1.4.2,oslosphinx==2.5.0,oslotest==1.5.3,passlib==1.6.5,Paste==2.0.2,PasteDeploy==1.5.2,pbr==0.11.0,pep8==1.5.7,posix-ipc==1.0.0,prettytable==0.7.2,pyasn1==0.1.9,pycadf==0.8.0,pycparser==2.14,pycrypto==2.6.1,pyflakes==0.8.1,Pygments==2.0.2,pymongo==2.9.1,pyOpenSSL==0.15.1,pysaml2==4.0.2,pysqlite==2.8.1,python-dateutil==2.4.2,python-editor==0.5,python-keystoneclient==1.3.3,python-ldap==2.4.22,python-memcached==1.57,python-mimeparse==0.1.4,python-subunit==1.2.0,pytz==2015.7,PyYAML==3.11,repoze.lru==0.6,repoze.who==2.2,requests==2.9.1,retrying==1.3.3,Routes==2.2,six==1.10.0,Sphinx==1.2.3,SQLAlchemy==0.9.10,sqlalchemy-migrate==0.9.7,sqlparse==0.1.18,stevedore==1.3.0,tempest-lib==0.4.0,Tempita==0.5.2,testrepository==0.0.20,testresources==1.0.0,testscenarios==0.5.0,testtools==1.8.1,traceback2==1.4.0,trollius==2.0,unittest2==1.1.0,waitress==0.8.10,WebOb==1.5.1,WebTest==2.0.20,wheel==0.24.0,zope.interface==4.1.3
py27 runtests: PYTHONHASHSEED='1155296268'
py27 runtests: commands[0] | bash tools/pretty_tox.sh test_v3_root
running testr
running=
OS_STDOUT_CAPTURE=${OS_STDOUT_CAPTURE:-1} \
OS_STDERR_CAPTURE=${OS_STDERR_CAPTURE:-1} \
OS_LOG_CAPTURE=${OS_LOG_CAPTURE:-1} \
${PYTHON:-python} -m subunit.run discover -t ./ ${OS_TEST_PATH:-./keystone/tests/unit} --list 
running=
OS_STDOUT_CAPTURE=${OS_STDOUT_CAPTURE:-1} \
OS_STDERR_CAPTURE=${OS_STDERR_CAPTURE:-1} \
OS_LOG_CAPTURE=${OS_LOG_CAPTURE:-1} \
${PYTHON:-python} -m subunit.run discover -t ./ ${OS_TEST_PATH:-./keystone/tests/unit}  --load-list /tmp/tmpyMhw1V
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_add_user_to_group [0.385024s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_admin_password_reset [0.455362s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_check_user_in_group [0.389916s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_create_group [0.247844s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_create_group_400 [0.238413s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_create_user [0.242800s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):
      File "keystone/tests/unit/test_v3_root.py", line 58, in test_create_user
        '/?Action=CreateUser',body={}
      File "keystone/tests/unit/test_v3.py", line 547, in get
        r = self.v3_request(method='GET', path=path, **kwargs)
      File "keystone/tests/unit/test_v3.py", line 544, in v3_request
        return self.admin_request(path=path, token=token, **kwargs)
      File "keystone/tests/unit/rest.py", line 207, in admin_request
        return self._request(app=self.admin_app, **kwargs)
      File "keystone/tests/unit/rest.py", line 196, in _request
        response = self.restful_request(**kwargs)
      File "keystone/tests/unit/rest.py", line 182, in restful_request
        **kwargs)
      File "keystone/tests/unit/rest.py", line 90, in request
        **kwargs)
      File "/opt/stack/keystone/.tox/py27/local/lib/python2.7/site-packages/webtest/app.py", line 567, in request
        expect_errors=expect_errors,
      File "/opt/stack/keystone/.tox/py27/local/lib/python2.7/site-packages/webtest/app.py", line 606, in do_request
        res = req.get_response(app, catch_exc_info=True)
      File "/opt/stack/keystone/.tox/py27/local/lib/python2.7/site-packages/webtest/app.py", line 664, in _check_status
        res)
    webtest.app.AppError: Bad response: 500 Internal Server Error (not 200 OK or 3xx redirect for http://localhost/v3/?Action=CreateUser)
    '{"error": {"code": 500, "message": "An unexpected error prevented the server from fulfilling your request.", "title": "Internal Server Error"}}'
    

Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    Adding cache-proxy 'keystone.tests.unit.test_cache.CacheIsolatingProxy' to backend.
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9ca93dd0> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9cace590> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9cb12150> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9cb12150> acquired
    Calling creation function
    Released creation lock
    Auth token not in the request header. Will not build auth context.
    POST http://localhost:80/v3/auth/tokens
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9ccd4a50> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9ccd43d0> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f99dbcb10> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f99dbce10> acquired
    Calling creation function
    Released creation lock
    RBAC: auth_context: {'token': <KeystoneToken (audit_id=YP-HuczJRUy2T5bTkERQsA, audit_chain_id=YP-HuczJRUy2T5bTkERQsA) at 0x7f0f99fd9178>, 'user_id': u'5f2b7673ce0148b39b65af9179386e89', 'roles': ['admin'], 'project_id': '24e52da52a344328ac49d8a95cdccd1c', 'trustor_id': None, 'trust_id': None, 'is_delegated_auth': False, 'access_token_id': None, 'trustee_id': None, 'consumer_id': None}
    GET http://localhost:80/v3/?Action=CreateUser
    enforce admin_required: {'tenant_id': '24e52da52a344328ac49d8a95cdccd1c', 'user_id': u'5f2b7673ce0148b39b65af9179386e89', 'roles': ['admin']}
    Reloaded policy file: /opt/stack/keystone/etc/policy.json
    
    Traceback (most recent call last):
      File "keystone/common/wsgi.py", line 238, in __call__
        result = method(context, **params)
      File "keystone/root/controllers.py", line 41, in genericmapper
        if Action == 'CreateUser':
      File "keystone/root/controllers.py", line 41, in genericmapper
        if Action == 'CreateUser':
      File "/usr/lib/python2.7/bdb.py", line 49, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 68, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
    

Captured stdout:
~~~~~~~~~~~~~~~~
    {'domain_id': '1367f5776dc6474eb4752d024a46ab33', 'id': '051864762230416fbd2a8b116a7cbce0', 'name': 'bec3eb00d6c946f4952dbcd87bc59f0a', 'description': '1aba8a50303043229b012d56e3a73305', 'password': 'Dt0$Prjh', 'email': '4425330bf1924e4e83e805277ff19759', 'enabled': True}
    > /opt/stack/keystone/keystone/root/controllers.py(41)genericmapper()
    -> if Action == 'CreateUser':
    (Pdb) 
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_create_user_400 [0.239955s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_create_user_password_not_logged [0.343134s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_create_user_without_domain [0.367794s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_delete_group [0.253696s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_delete_user [0.370325s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_get_group [0.237278s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_get_user [0.243072s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_get_user_with_default_project [0.358430s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_list_groups [0.249356s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_list_groups_for_user [0.425939s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):
      File "keystone/tests/unit/test_v3_root.py", line 243, in test_list_groups_for_user
        expected_status=exception.ForbiddenAction.code)
      File "keystone/tests/unit/test_v3.py", line 547, in get
        r = self.v3_request(method='GET', path=path, **kwargs)
      File "keystone/tests/unit/test_v3.py", line 544, in v3_request
        return self.admin_request(path=path, token=token, **kwargs)
      File "keystone/tests/unit/rest.py", line 207, in admin_request
        return self._request(app=self.admin_app, **kwargs)
      File "keystone/tests/unit/rest.py", line 196, in _request
        response = self.restful_request(**kwargs)
      File "keystone/tests/unit/rest.py", line 182, in restful_request
        **kwargs)
      File "keystone/tests/unit/rest.py", line 90, in request
        **kwargs)
      File "/opt/stack/keystone/.tox/py27/local/lib/python2.7/site-packages/webtest/app.py", line 567, in request
        expect_errors=expect_errors,
      File "/opt/stack/keystone/.tox/py27/local/lib/python2.7/site-packages/webtest/app.py", line 632, in do_request
        self._check_status(status, res)
      File "/opt/stack/keystone/.tox/py27/local/lib/python2.7/site-packages/webtest/app.py", line 667, in _check_status
        "Bad response: %s (not %s)", res_status, status)
    webtest.app.AppError: Bad response: 200 OK (not 403)
    

Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    Adding cache-proxy 'keystone.tests.unit.test_cache.CacheIsolatingProxy' to backend.
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9c5b6c50> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9c0bf210> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9cb12090> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9aeb82d0> acquired
    Calling creation function
    Released creation lock
    Auth token not in the request header. Will not build auth context.
    POST http://localhost:80/v3/auth/tokens
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9c24f150> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9c24fd10> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9c623d50> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9c623c10> acquired
    Calling creation function
    Released creation lock
    RBAC: auth_context: {'token': <KeystoneToken (audit_id=-XZP1g8GRx2M5_x6kOo81A, audit_chain_id=-XZP1g8GRx2M5_x6kOo81A) at 0x7f0f9c863be0>, 'user_id': u'51e6945dad304327b10e43de8b3e1593', 'roles': ['admin'], 'project_id': 'a2fde1e92df44778b2638c4e6c9b27c8', 'trustor_id': None, 'trust_id': None, 'is_delegated_auth': False, 'access_token_id': None, 'trustee_id': None, 'consumer_id': None}
    PUT http://localhost:80/v3/groups/9bc6e6a39fe54310b7c446bbb495951a/users/90ca40a6073f4422a073f7f9969d85a1
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9ca3d790> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9ca3d490> acquired
    Calling creation function
    Released creation lock
    RBAC: Authorizing identity:add_user_to_group(group_id=9bc6e6a39fe54310b7c446bbb495951a, user_id=90ca40a6073f4422a073f7f9969d85a1)
    RBAC: using auth context from the request environment
    enforce identity:add_user_to_group: {'token': <KeystoneToken (audit_id=-XZP1g8GRx2M5_x6kOo81A, audit_chain_id=-XZP1g8GRx2M5_x6kOo81A) at 0x7f0f9c863be0>, 'user_id': u'51e6945dad304327b10e43de8b3e1593', 'roles': ['admin'], 'project_id': 'a2fde1e92df44778b2638c4e6c9b27c8', 'trustor_id': None, 'trust_id': None, 'is_delegated_auth': False, 'access_token_id': None, 'trustee_id': None, 'consumer_id': None}
    Reloaded policy file: /opt/stack/keystone/etc/policy.json
    RBAC: Authorization granted
    Auth token not in the request header. Will not build auth context.
    POST http://localhost:80/v3/auth/tokens
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9c24fb50> acquired
    Calling creation function
    Released creation lock
    RBAC: Proceeding without project or domain scope
    RBAC: auth_context: {'token': <KeystoneToken (audit_id=Fb987vxXRnGebYZVjy6YbA, audit_chain_id=Fb987vxXRnGebYZVjy6YbA) at 0x7f0f9cc55e30>, 'user_id': u'90ca40a6073f4422a073f7f9969d85a1', 'trustor_id': None, 'trust_id': None, 'is_delegated_auth': False, 'access_token_id': None, 'trustee_id': None, 'consumer_id': None}
    GET http://localhost:80/v3/users/90ca40a6073f4422a073f7f9969d85a1/groups
    Auth token not in the request header. Will not build auth context.
    POST http://localhost:80/v3/auth/tokens
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9c623590> acquired
    Calling creation function
    Released creation lock
    RBAC: auth_context: {'token': <KeystoneToken (audit_id=SwJynd4ASxqomwjcbTfqvw, audit_chain_id=SwJynd4ASxqomwjcbTfqvw) at 0x7f0f9b43c990>, 'user_id': u'51e6945dad304327b10e43de8b3e1593', 'roles': ['admin'], 'project_id': 'a2fde1e92df44778b2638c4e6c9b27c8', 'trustor_id': None, 'trust_id': None, 'is_delegated_auth': False, 'access_token_id': None, 'trustee_id': None, 'consumer_id': None}
    GET http://localhost:80/v3/users/90ca40a6073f4422a073f7f9969d85a1/groups
    Auth token not in the request header. Will not build auth context.
    POST http://localhost:80/v3/auth/tokens
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f999bb050> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9c623310> acquired
    Calling creation function
    Released creation lock
    RBAC: Proceeding without project or domain scope
    RBAC: auth_context: {'token': <KeystoneToken (audit_id=0mcdJuLAQl6YiNyp6tBzFA, audit_chain_id=0mcdJuLAQl6YiNyp6tBzFA) at 0x7f0f9c1883c8>, 'user_id': u'd209f8fab12d4749b1fe686138b2500d', 'trustor_id': None, 'trust_id': None, 'is_delegated_auth': False, 'access_token_id': None, 'trustee_id': None, 'consumer_id': None}
    GET http://localhost:80/v3/users/90ca40a6073f4422a073f7f9969d85a1/groups
    
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_list_users [0.241766s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_list_users_in_group [0.293521s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_list_users_no_default_project [0.345970s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_list_users_with_multiple_backends [0.381250s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_list_users_with_static_admin_token_and_multiple_backends [0.197040s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_remove_user_from_group [0.309588s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_update_group [0.244753s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_update_group_domain_id [0.389541s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_update_password_not_logged [0.321128s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_update_user [0.283316s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityTestCase.test_update_user_domain_id [0.322600s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityV3toV2MethodsTestCase.test_v3_to_v2_user_method [0.011597s] ... ok
{0} keystone.tests.unit.test_v3_root.IdentityV3toV2MethodsTestCase.test_v3_to_v2_user_method_list [0.009235s] ... ok
{0} keystone.tests.unit.test_v3_root.UserSelfServiceChangingPasswordsTestCase.test_changing_password [0.568538s] ... ok
{0} keystone.tests.unit.test_v3_root.UserSelfServiceChangingPasswordsTestCase.test_changing_password_not_complying_policy_fails [0.514420s] ... ok
{0} keystone.tests.unit.test_v3_root.UserSelfServiceChangingPasswordsTestCase.test_changing_password_not_logged [0.466909s] ... ok
{0} keystone.tests.unit.test_v3_root.UserSelfServiceChangingPasswordsTestCase.test_changing_password_with_disabled_user_fails [0.425367s] ... ok
{0} keystone.tests.unit.test_v3_root.UserSelfServiceChangingPasswordsTestCase.test_changing_password_with_incorrect_password_fails [0.389303s] ... ok
{0} keystone.tests.unit.test_v3_root.UserSelfServiceChangingPasswordsTestCase.test_changing_password_with_last_used_password_fails [0.366266s] ... ok
{0} keystone.tests.unit.test_v3_root.UserSelfServiceChangingPasswordsTestCase.test_changing_password_with_missing_original_password_fails [0.440926s] ... ok
{0} keystone.tests.unit.test_v3_root.UserSelfServiceChangingPasswordsTestCase.test_changing_password_with_missing_password_fails [0.345459s] ... ok
{0} keystone.tests.unit.test_v3_root.UserSelfServiceChangingPasswordsTestCase.test_changing_password_with_same_password_fails [0.347139s] ... ok

==============================
Failed 2 tests - output below:
==============================

keystone.tests.unit.test_v3_root.IdentityTestCase.test_create_user
------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):
      File "keystone/tests/unit/test_v3_root.py", line 58, in test_create_user
        '/?Action=CreateUser',body={}
      File "keystone/tests/unit/test_v3.py", line 547, in get
        r = self.v3_request(method='GET', path=path, **kwargs)
      File "keystone/tests/unit/test_v3.py", line 544, in v3_request
        return self.admin_request(path=path, token=token, **kwargs)
      File "keystone/tests/unit/rest.py", line 207, in admin_request
        return self._request(app=self.admin_app, **kwargs)
      File "keystone/tests/unit/rest.py", line 196, in _request
        response = self.restful_request(**kwargs)
      File "keystone/tests/unit/rest.py", line 182, in restful_request
        **kwargs)
      File "keystone/tests/unit/rest.py", line 90, in request
        **kwargs)
      File "/opt/stack/keystone/.tox/py27/local/lib/python2.7/site-packages/webtest/app.py", line 567, in request
        expect_errors=expect_errors,
      File "/opt/stack/keystone/.tox/py27/local/lib/python2.7/site-packages/webtest/app.py", line 606, in do_request
        res = req.get_response(app, catch_exc_info=True)
      File "/opt/stack/keystone/.tox/py27/local/lib/python2.7/site-packages/webtest/app.py", line 664, in _check_status
        res)
    webtest.app.AppError: Bad response: 500 Internal Server Error (not 200 OK or 3xx redirect for http://localhost/v3/?Action=CreateUser)
    '{"error": {"code": 500, "message": "An unexpected error prevented the server from fulfilling your request.", "title": "Internal Server Error"}}'
    

Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    Adding cache-proxy 'keystone.tests.unit.test_cache.CacheIsolatingProxy' to backend.
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9ca93dd0> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9cace590> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9cb12150> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9cb12150> acquired
    Calling creation function
    Released creation lock
    Auth token not in the request header. Will not build auth context.
    POST http://localhost:80/v3/auth/tokens
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9ccd4a50> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9ccd43d0> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f99dbcb10> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f99dbce10> acquired
    Calling creation function
    Released creation lock
    RBAC: auth_context: {'token': <KeystoneToken (audit_id=YP-HuczJRUy2T5bTkERQsA, audit_chain_id=YP-HuczJRUy2T5bTkERQsA) at 0x7f0f99fd9178>, 'user_id': u'5f2b7673ce0148b39b65af9179386e89', 'roles': ['admin'], 'project_id': '24e52da52a344328ac49d8a95cdccd1c', 'trustor_id': None, 'trust_id': None, 'is_delegated_auth': False, 'access_token_id': None, 'trustee_id': None, 'consumer_id': None}
    GET http://localhost:80/v3/?Action=CreateUser
    enforce admin_required: {'tenant_id': '24e52da52a344328ac49d8a95cdccd1c', 'user_id': u'5f2b7673ce0148b39b65af9179386e89', 'roles': ['admin']}
    Reloaded policy file: /opt/stack/keystone/etc/policy.json
    
    Traceback (most recent call last):
      File "keystone/common/wsgi.py", line 238, in __call__
        result = method(context, **params)
      File "keystone/root/controllers.py", line 41, in genericmapper
        if Action == 'CreateUser':
      File "keystone/root/controllers.py", line 41, in genericmapper
        if Action == 'CreateUser':
      File "/usr/lib/python2.7/bdb.py", line 49, in trace_dispatch
        return self.dispatch_line(frame)
      File "/usr/lib/python2.7/bdb.py", line 68, in dispatch_line
        if self.quitting: raise BdbQuit
    BdbQuit
    

Captured stdout:
~~~~~~~~~~~~~~~~
    {'domain_id': '1367f5776dc6474eb4752d024a46ab33', 'id': '051864762230416fbd2a8b116a7cbce0', 'name': 'bec3eb00d6c946f4952dbcd87bc59f0a', 'description': '1aba8a50303043229b012d56e3a73305', 'password': 'Dt0$Prjh', 'email': '4425330bf1924e4e83e805277ff19759', 'enabled': True}
    > /opt/stack/keystone/keystone/root/controllers.py(41)genericmapper()
    -> if Action == 'CreateUser':
    (Pdb) 

keystone.tests.unit.test_v3_root.IdentityTestCase.test_list_groups_for_user
---------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):
      File "keystone/tests/unit/test_v3_root.py", line 243, in test_list_groups_for_user
        expected_status=exception.ForbiddenAction.code)
      File "keystone/tests/unit/test_v3.py", line 547, in get
        r = self.v3_request(method='GET', path=path, **kwargs)
      File "keystone/tests/unit/test_v3.py", line 544, in v3_request
        return self.admin_request(path=path, token=token, **kwargs)
      File "keystone/tests/unit/rest.py", line 207, in admin_request
        return self._request(app=self.admin_app, **kwargs)
      File "keystone/tests/unit/rest.py", line 196, in _request
        response = self.restful_request(**kwargs)
      File "keystone/tests/unit/rest.py", line 182, in restful_request
        **kwargs)
      File "keystone/tests/unit/rest.py", line 90, in request
        **kwargs)
      File "/opt/stack/keystone/.tox/py27/local/lib/python2.7/site-packages/webtest/app.py", line 567, in request
        expect_errors=expect_errors,
      File "/opt/stack/keystone/.tox/py27/local/lib/python2.7/site-packages/webtest/app.py", line 632, in do_request
        self._check_status(status, res)
      File "/opt/stack/keystone/.tox/py27/local/lib/python2.7/site-packages/webtest/app.py", line 667, in _check_status
        "Bad response: %s (not %s)", res_status, status)
    webtest.app.AppError: Bad response: 200 OK (not 403)
    

Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    Adding cache-proxy 'keystone.tests.unit.test_cache.CacheIsolatingProxy' to backend.
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9c5b6c50> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9c0bf210> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9cb12090> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9aeb82d0> acquired
    Calling creation function
    Released creation lock
    Auth token not in the request header. Will not build auth context.
    POST http://localhost:80/v3/auth/tokens
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9c24f150> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9c24fd10> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9c623d50> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9c623c10> acquired
    Calling creation function
    Released creation lock
    RBAC: auth_context: {'token': <KeystoneToken (audit_id=-XZP1g8GRx2M5_x6kOo81A, audit_chain_id=-XZP1g8GRx2M5_x6kOo81A) at 0x7f0f9c863be0>, 'user_id': u'51e6945dad304327b10e43de8b3e1593', 'roles': ['admin'], 'project_id': 'a2fde1e92df44778b2638c4e6c9b27c8', 'trustor_id': None, 'trust_id': None, 'is_delegated_auth': False, 'access_token_id': None, 'trustee_id': None, 'consumer_id': None}
    PUT http://localhost:80/v3/groups/9bc6e6a39fe54310b7c446bbb495951a/users/90ca40a6073f4422a073f7f9969d85a1
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9ca3d790> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9ca3d490> acquired
    Calling creation function
    Released creation lock
    RBAC: Authorizing identity:add_user_to_group(group_id=9bc6e6a39fe54310b7c446bbb495951a, user_id=90ca40a6073f4422a073f7f9969d85a1)
    RBAC: using auth context from the request environment
    enforce identity:add_user_to_group: {'token': <KeystoneToken (audit_id=-XZP1g8GRx2M5_x6kOo81A, audit_chain_id=-XZP1g8GRx2M5_x6kOo81A) at 0x7f0f9c863be0>, 'user_id': u'51e6945dad304327b10e43de8b3e1593', 'roles': ['admin'], 'project_id': 'a2fde1e92df44778b2638c4e6c9b27c8', 'trustor_id': None, 'trust_id': None, 'is_delegated_auth': False, 'access_token_id': None, 'trustee_id': None, 'consumer_id': None}
    Reloaded policy file: /opt/stack/keystone/etc/policy.json
    RBAC: Authorization granted
    Auth token not in the request header. Will not build auth context.
    POST http://localhost:80/v3/auth/tokens
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9c24fb50> acquired
    Calling creation function
    Released creation lock
    RBAC: Proceeding without project or domain scope
    RBAC: auth_context: {'token': <KeystoneToken (audit_id=Fb987vxXRnGebYZVjy6YbA, audit_chain_id=Fb987vxXRnGebYZVjy6YbA) at 0x7f0f9cc55e30>, 'user_id': u'90ca40a6073f4422a073f7f9969d85a1', 'trustor_id': None, 'trust_id': None, 'is_delegated_auth': False, 'access_token_id': None, 'trustee_id': None, 'consumer_id': None}
    GET http://localhost:80/v3/users/90ca40a6073f4422a073f7f9969d85a1/groups
    Auth token not in the request header. Will not build auth context.
    POST http://localhost:80/v3/auth/tokens
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9c623590> acquired
    Calling creation function
    Released creation lock
    RBAC: auth_context: {'token': <KeystoneToken (audit_id=SwJynd4ASxqomwjcbTfqvw, audit_chain_id=SwJynd4ASxqomwjcbTfqvw) at 0x7f0f9b43c990>, 'user_id': u'51e6945dad304327b10e43de8b3e1593', 'roles': ['admin'], 'project_id': 'a2fde1e92df44778b2638c4e6c9b27c8', 'trustor_id': None, 'trust_id': None, 'is_delegated_auth': False, 'access_token_id': None, 'trustee_id': None, 'consumer_id': None}
    GET http://localhost:80/v3/users/90ca40a6073f4422a073f7f9969d85a1/groups
    Auth token not in the request header. Will not build auth context.
    POST http://localhost:80/v3/auth/tokens
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f999bb050> acquired
    Calling creation function
    Released creation lock
    NeedRegenerationException
    no value, waiting for create lock
    value creation lock <dogpile.cache.region._LockWrapper object at 0x7f0f9c623310> acquired
    Calling creation function
    Released creation lock
    RBAC: Proceeding without project or domain scope
    RBAC: auth_context: {'token': <KeystoneToken (audit_id=0mcdJuLAQl6YiNyp6tBzFA, audit_chain_id=0mcdJuLAQl6YiNyp6tBzFA) at 0x7f0f9c1883c8>, 'user_id': u'd209f8fab12d4749b1fe686138b2500d', 'trustor_id': None, 'trust_id': None, 'is_delegated_auth': False, 'access_token_id': None, 'trustee_id': None, 'consumer_id': None}
    GET http://localhost:80/v3/users/90ca40a6073f4422a073f7f9969d85a1/groups
    


======
Totals
======
Ran: 38 tests in 15.0000 sec.
 - Passed: 36
 - Skipped: 0
 - Expected Fail: 0
 - Unexpected Success: 0
 - Failed: 2
Sum of execute time for each test: 12.2640 sec.

==============
Worker Balance
==============
 - Worker 0 (38 tests) => 0:00:12.368761s

Slowest Tests:

Test id                                                                                                                                Runtime (s)
-------------------------------------------------------------------------------------------------------------------------------------  -----------
keystone.tests.unit.test_v3_root.UserSelfServiceChangingPasswordsTestCase.test_changing_password                                       0.569
keystone.tests.unit.test_v3_root.UserSelfServiceChangingPasswordsTestCase.test_changing_password_not_complying_policy_fails            0.514
keystone.tests.unit.test_v3_root.UserSelfServiceChangingPasswordsTestCase.test_changing_password_not_logged                            0.467
keystone.tests.unit.test_v3_root.IdentityTestCase.test_admin_password_reset                                                            0.455
keystone.tests.unit.test_v3_root.UserSelfServiceChangingPasswordsTestCase.test_changing_password_with_missing_original_password_fails  0.441
keystone.tests.unit.test_v3_root.IdentityTestCase.test_list_groups_for_user                                                            0.426
keystone.tests.unit.test_v3_root.UserSelfServiceChangingPasswordsTestCase.test_changing_password_with_disabled_user_fails              0.425
keystone.tests.unit.test_v3_root.IdentityTestCase.test_check_user_in_group                                                             0.390
keystone.tests.unit.test_v3_root.IdentityTestCase.test_update_group_domain_id                                                          0.390
keystone.tests.unit.test_v3_root.UserSelfServiceChangingPasswordsTestCase.test_changing_password_with_incorrect_password_fails         0.389
ERROR: InvocationError: '/bin/bash tools/pretty_tox.sh test_v3_root'
___________________________________ summary ____________________________________
ERROR:   py27: commands failed
